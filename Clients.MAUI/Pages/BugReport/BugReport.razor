@page "/bugReport"
@using SharedLibrary.Authentication

<EditForm class="fade-in d-flex align-start justify-center pt-5" style="height: 50vh" Model="@_bugRequest" OnValidSubmit="SubmitAsync">
    <FluentValidationValidator @ref="@_fluentValidationValidator" />
    <MudPaper Elevation="3" Class="d-flex align-center justify-center pa-5" Width="70vw">
        <MudGrid Class="d-flex align-center justify-center">
            <MudItem xs="12">
                <MudTextField Lines="7" T="string" Variant="Variant.Outlined" Placeholder=@("На главной странице при нажатии на кнопку \"Подробнее\" на любой из плашек вылетает приложение")
                              For="@(() => _bugRequest.Text)" @bind-Value="_bugRequest.Text" />
            </MudItem>
            <MudItem xs="12" Class="d-flex justify-center align-self-start">
                <MudButton ButtonType="ButtonType.Submit" Disabled=@(!_validated) Variant="Variant.Filled" Color="Color.Primary">Отправить</MudButton>
            </MudItem>
        </MudGrid>
    </MudPaper>
</EditForm>

<MudContainer Style="width: 80vw" Class="d-flex align-center justify-center">
    <AuthorizeView Roles="@SHRoles.Admin">
        <Authorized>
            <MudPaper Elevation="3" Class="fade-in d-flex align-center justify-center pa-5">
                <MudGrid>
                    @foreach (var report in _reports)
                    {
                        <MudItem xs="12">
                            <MudStack>
                                <MudText>@($"{report.CreatedByEmail}, {report.LastModifiedOn}")</MudText>
                                    <MudText>@report.Text</MudText>
                                </MudStack>
                                <MudDivider Class="mt-2" />
                            </MudItem>
                    }
                </MudGrid>
            </MudPaper>
        </Authorized>
    </AuthorizeView>
</MudContainer>


